!function(){function O(t,i){return function(){return t.apply(i,arguments)}}!function(e){var m,t,h,a,i,l,g,s,o,n,p,d,w,r,b,x,P,u,T,c,y,f,v,k,E,L,_,I,S,z,B,C,D;function A(t,i){this.elObj=t,this.vmStop=O(this.vmStop,this),this.vmPlay=O(this.vmPlay,this),this.vmListen=O(this.vmListen,this),this.initPlayerVM=O(this.initPlayerVM,this),this.coverYT=O(this.coverYT,this),this.ytState=O(this.ytState,this),this.ytStop=O(this.ytStop,this),this.ytPlay=O(this.ytPlay,this),this.setYTPlayer=O(this.setYTPlayer,this),this.initPlayerYT=O(this.initPlayerYT,this),this.cover=O(this.cover,this),this.hide=O(this.hide,this),this.show=O(this.show,this),this.clear=O(this.clear,this),this.stop=O(this.stop,this),this.play=O(this.play,this),this.peek=O(this.peek,this),this.hovered=O(this.hovered,this),this.clicked=O(this.clicked,this),this.regEvents=O(this.regEvents,this),this.resize=O(this.resize,this),this.popoverPos=O(this.popoverPos,this),this.buildEls=O(this.buildEls,this),this.buildOpts=O(this.buildOpts,this),this.opts=g({},i),this.inst=f(),this.el=this.elObj.el,this.buildOpts(),this.buildEls(),h(this.opts.cover,!1)&&this.cover(),this.regEvents()}z=e,C=this,B=function(t){var i,e,s,o,n,r,h,a,l,p,d,u,c,y,f,g=function(){console.error("VideoLightning was initialized without elements.")},v=t.elements||t.element;if(!v)return g();if(y=[],o=[],c=function(t){var i;return T(t)?y.push({el:t,opts:null}):(i=E(t),y.push({el:i,opts:t[i]||null}))},x(v))for(n=0,a=v.length;n<a;n++)c(v[n]);else c(v);for(r=0,l=y.length;r<l;r++)if(s=y[r],e=w(s.el))if(P(e))for(h=0,p=e.length;h<p;h++)i=e[h],o.push({el:i,opts:s.opts});else o.push({el:e,opts:s.opts});if(0===o.length)return g();for(f=t.settings||{},u=0,d=o.length;u<d;u++)(s=o[u])&&C.vlData.instances.push(new m(s,f));b()},A.prototype.buildOpts=function(){var t,i,e,s,o,n,r,h,a,l,p,d,u,c,y,f=[["backdrop_color","bdColor"],["backdrop_opacity","bdOpacity"],["ease_in","fadeIn"],["ease_out","fadeOut"],["glow_color","glowColor"],["start_time","startTime"],["z_index","zIndex"],["rick_roll","rickRoll"],["iv_load_policy","ivLoadPolicy"]];if(g(this.opts,this.elObj.opts),0===(e=this.el.dataset||[]).length)for(s=0,h=(d=["id","width","height"]).length;s<h;s++)(c=this.el.getAttribute("data-video-"+(n=d[s])))&&(e[n]=c);for(n in y=this,p=function(t,i){return y.opts[t.replace(/^video(.)(.*)/,function(t,i,e){return i.toLowerCase()+e})]=i},e)p(n,c=e[n]);for(this.opts.width=this.opts.width?parseInt(this.opts.width,10):640,this.opts.height=this.opts.height?parseInt(this.opts.height,10):390,i=this.opts.height/this.opts.width,!this.opts.fullscreenAllowed&&this.opts.width>window.innerWidth-90&&(this.opts.width=window.innerWidth-90,this.opts.height=Math.round(i*this.opts.width)),null==(i=this.opts).id&&(i.id="y-dQw4w9WgXcQ"),this.opts.id.match(/^v/)?(this.vendor="vimeo",this.vm=!0):this.opts.id.match(/^f/)?(this.vendor="iframe",this.ifr=!0):(this.vendor="youtube",this.yt=!0),window.vlData[this.vendor]=!0,this.id=this.opts.id.replace(/([vyf]-)/i,""),u=[],o=0,a=f.length;o<a;o++)u.push(null!=(t=this.opts)[l=(r=f[o])[1]]?t[l]:t[l]=this.opts[r[0]]);return u},A.prototype.buildEls=function(){var t,i,e,s,o,n,r;return(this.target=z.createElement("span")).className="video-target",this.el.parentNode.insertBefore(this.target,this.el),this.target.appendChild(this.el),n=a(L(this.opts.bdColor,"#ddd")),r=L(this.opts.bdOpacity,.6),t="background: rgba("+n.r+", "+n.g+", "+n.b+", "+r+");",i="width: "+this.opts.width+"px; height: "+this.opts.height+"px;",s="margin-top: -"+this.opts.height/2+"px; margin-left: -"+this.opts.width/2+"px;",e="box-shadow: 0px 0px "+(o=L(this.opts.glow,20))+"px "+o/5+"px "+d(L(this.opts.glowColor,"#000"))+";",n=h(this.opts.popover,!1)?I(this.opts.width,this.opts.height):_,r="background: "+d(L(this.opts.xBgColor,"#000"))+"; color: "+d(L(this.opts.xColor,"#fff"))+"; border: "+L(this.opts.xBorder,"none")+"; box-sizing: border-box;",o="background: "+d(L(this.opts.frameColor,"#000"))+"; border: "+L(this.opts.frameBorder,"none")+"; box-sizing: border-box;",this.target.insertAdjacentHTML("beforeend",l({tag:"div",attrs:{id:"wrap_"+this.inst,class:"video-wrapper",style:n+" "+t+" z-index: "+L(this.opts.zIndex,2100)+"; opacity: 0;"},children:[{tag:"div",attrs:{class:"video-frame",style:p+" "+i+" "+s+" "+e},children:[{tag:"div",attrs:{class:"video"},children:[{tag:"div",inner:"&times;",attrs:{id:"close_"+this.inst,class:"video-close",style:"float: right; margin-right: -34px; "+e+" "+r+" padding: 0 10px 0 12px; font-size: 25px;"}},{tag:"iframe",attrs:{type:"text/html",id:"iframe_"+this.inst,class:"video-iframe",style:"position: absolute; top: 0; left: 0; "+o}}]}]}]})),this.wrapper=z.getElementById("wrap_"+this.inst),this.iframe=z.getElementById("iframe_"+this.inst),this.close=z.getElementById("close_"+this.inst)},A.prototype.popoverPos=function(){var t=r(this.target,this.opts.width,this.opts.height,this.opts.fluidity);return this.wrapper.style.left=t.x+"px",this.wrapper.style.top=t.y+"px"},A.prototype.resize=function(){if(!window.vlData.throttle&&(this.popoverPos(),this.opts.throttle))return window.vlData.throttle=!0,setTimeout(function(){return window.vlData.throttle=!1},this.opts.throttle)},A.prototype.regEvents=function(){if(this.target.style.cursor="pointer",this.target.addEventListener("mouseup",this.clicked,!1),h(this.opts.popover,!1)&&(window.addEventListener("resize",this.resize,!1),window.addEventListener("scroll",this.resize,!1),window.addEventListener("orientationchange",this.resize,!1),this.opts.peek))return this.target.addEventListener("mouseenter",this.hovered,!1),this.target.addEventListener("mouseleave",this.hovered,!1)},A.prototype.clicked=function(t){return this.peeking?this.peek(!1,!0):t.buttons&&1!==t.buttons||t.which&&1!==t.which||t.button&&1!==t.button?void 0:this.playing?this.stop():this.play()},A.prototype.hovered=function(t){if("mouseenter"!==t.type||this.playing||this.peek(),"mouseleave"===t.type&&this.playing)return this.peek(this.peeking)},A.prototype.peek=function(t,i){if(null==t&&(t=!1),null==i&&(i=!1),this.peeking||!this.playing)return this.close.innerHTML=t||i?"&times;":"&#94;",this.peeking=!(t||i),t?this.stop():i?null:this.play()},A.prototype.play=function(){h(this.opts.popover,!1)&&this.popoverPos(),this.show(),this.ifr?v(this.iframe,{url:encodeURI(this.id),attrs:{width:this.opts.width,height:this.opts.height,frameBorder:0}}):this.ready&&!this.playing&&"about:blank"!==this.iframe.src?(this.yt&&this.ytPlay(),this.vm&&this.vmPlay()):this.playing||(this.vm&&this.initPlayerVM(),this.yt&&this.initPlayerYT()),this.playing=!0,this.clearAfter&&window.clearTimeout(this.clearAfter)},A.prototype.stop=function(t){null==t&&(t=0),h(this.opts.rickRoll,!1)||(this.hide(t),this.ready?(this.yt&&this.ytStop(),this.vm&&this.vmStop()):this.clear(),this.playing=!1,h(this.opts.unload,!0)&&(this.clearAfter=window.setTimeout(this.clear,1e3*(L(this.opts.unloadAfter)||45))))},A.prototype.clear=function(){this.iframe.src="about:blank"},A.prototype.show=function(){o(this.wrapper,L(this.opts.fadeIn,300))},A.prototype.hide=function(t){n(this.wrapper,L(this.opts.fadeOut,t=null==t?0:t))},A.prototype.cover=function(){this.yt&&this.coverYT()},A.prototype.initPlayerYT=function(){if(v(this.iframe,{url:"https://www.youtube.com/embed/"+this.id,params:{enablejsapi:1,autoplay:t(this.opts.autoplay,1),autohide:L(this.opts.autohide,2),cc_load_policy:L(this.opts.ccLoadPolicy,0),color:L(this.opts.color,null),controls:L(this.opts.controls,2),disablekb:L(this.opts.disablekb,0),end:L(this.opts.endTime,null),fs:L(this.opts.fs,1),hl:L(this.opts.hl,"en"),iv_load_policy:L(this.opts.ivLoadPolicy,1),list:L(this.opts.list,null),listType:L(this.opts.listType,null),loop:L(this.opts.loop,0),modestbranding:L(this.opts.modestbranding,0),origin:encodeURIComponent(L(this.opts.origin,location.protocol+"//"+location.host)),playerapiid:this.inst,playlist:L(this.opts.playlist,null),playsinline:L(this.opts.playsinline,0),rel:L(this.opts.rel,0),showinfo:L(this.opts.showinfo,1),start:L(this.opts.startTime,0),theme:L(this.opts.theme,null)},attrs:{width:this.opts.width,height:this.opts.height,frameBorder:0}}),this.iframe.setAttribute("allowFullScreen",""),window.vlData.ytAPIReady)return this.setYTPlayer()},A.prototype.setYTPlayer=function(){var t;return null!=(t=this).ytPlayer?this.ytPlayer:this.ytPlayer=new YT.Player("iframe_"+this.inst,{events:{onReady:function(){return t.ready=!0},onStateChange:this.ytState}})},A.prototype.ytPlay=function(){return this.ytPlayer.playVideo()},A.prototype.ytStop=function(){S(this.ytPlayer,this.opts.startTime),this.ytPlayer.stopVideo(),this.ytPlayer.clearVideo(),this.opts.startTime&&this.clear()},A.prototype.ytState=function(t){if(0===t.data&&h(this.opts.autoclose,!0))return this.stop(L(this.opts.fadeOut,1e3))},A.prototype.coverYT=function(){this.ytCover=i(this.target,"//img.youtube.com/vi/"+this.id+"/hqdefault.jpg")},A.prototype.initPlayerVM=function(){return v(this.iframe,{url:"https://player.vimeo.com/video/"+this.id,params:{autoplay:t(this.opts.autoplay,1),loop:L(this.opts.loop,0),title:L(this.opts.showinfo,1),byline:L(this.opts.byline,1),portrait:L(this.opts.portrait,1),color:y(L(this.opts.color,"#00adef")),api:1,player_id:this.inst},attrs:{width:this.opts.width,height:this.opts.height,frameBorder:0}}),this.iframe.setAttribute("allowFullScreen",""),window.addEventListener("message",this.vmListen,!1),null!=this.vmPlayer?this.vmPlayer:this.vmPlayer=this.iframe},A.prototype.vmListen=function(t){t=JSON.parse(t.data);if(t.player_id===this.inst)switch(t.event){case"ready":this.ready=!0,c(this.vmPlayer,this.id,"addEventListener","finish");break;case"finish":this.stop(1e3)}},A.prototype.vmPlay=function(){c(this.vmPlayer,this.id,"play")},A.prototype.vmStop=function(){c(this.vmPlayer,this.id,"pause"),this.opts.startTime&&this.clear()},m=A,L=function(t,i){return!1===t||"false"===t||0===t||"0"===t?t:t||i},t=function(t,i){return!1===t||"false"===t||0===t||"0"===t?0:!0===t||"true"===t||"1"===t||1===t?1:i},h=function(t,i){return!1!==t&&"false"!==t&&0!==t&&"0"!==t&&(!!t||i)},l=function(t){var i,e,s,o,n,r,h="",a="";if(t.attrs)for(s in n=t.attrs)h+=" "+s+'="'+n[s]+'"';if(t.children)for(e=0,o=(r=t.children).length;e<o;e++)i=r[e],a+=u(i)?l(i):i;return"<"+t.tag+h+">"+(t.inner||a)+"</"+t.tag+">"},v=function(t,i){var e,s,o,n,r=i.url+"?",h=i.params;for(e in h)null!==(n=h[e])&&(r+="&"+e+"="+n);for(e in t.src=r.replace(/&/,""),o=[],s=i.attrs)n=s[e],o.push(t[e]=n);return o},g=function(t,i){var e,s;for(e in i)s=i[e],t[e]=s;return t},T=function(t){return"string"==typeof t},x=function(t){return t instanceof Array},P=function(t){return t instanceof HTMLCollection||t instanceof NodeList},u=function(t){return null!==t&&"object"==typeof t},E=function(t){for(var i in t)return t[i],i},w=function(t){t="#"===t.charAt(0)?z.getElementById(t.substr(1)):z.getElementsByClassName(t.substr(1));return x(t)&&0===t.length?null:t},f=function(){return(Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)).substring(0,16)},y=function(t){return 3===(t=t.replace(/^#/,"")).length?""+t+t:t},d=function(t){return"transparent"===t?t:"#"+y(t)},a=function(t){return{r:parseInt(y(t).substring(0,2),16),g:parseInt(y(t).substring(2,4),16),b:parseInt(y(t).substring(4,6),16)}},_="display: none; position: fixed; min-width: 100%; min-height: 100%; top: 0; right: 0; bottom: 0; left: 0;",I=function(t,i){return"display: none; position: fixed; width: "+t+"px; height: "+i+"px;"},p="position: absolute; top: 50%; left: 50%; background: #000000;",s=function(t,i){return t.style.transition=t.style.mozTransition=t.style.webkitTransition="opacity "+i+"ms ease"},o=function(t,i){return s(t,i),t.style.display="block",setTimeout(function(){return t.style.opacity=1},20)},n=function(t,i){return s(t,i),t.style.opacity=0,setTimeout(function(){return t.style.display="none"},i)},b=function(){var t,i;z.getElementById("ytScript")||(i=z.getElementsByTagName("script")[0],(t=e.createElement("script")).innerHTML="function onYouTubeIframeAPIReady() {vlData.ytReady()};",i.parentNode.insertBefore(t,i),(i=e.createElement("script")).id="ytScript",i.async=!0,i.src="https://www.youtube.com/iframe_api",t.parentNode.insertBefore(i,t.nextSibling))},S=function(t,i){null==i&&(i=0),t.getDuration()-3<t.getCurrentTime()&&(t.pauseVideo(),t.seekTo(i,!1))},c=function(t,i,e,s){return null==s&&(s=null),t.contentWindow.postMessage(JSON.stringify(s?{method:e,value:s}:{method:e}),"https://player.vimeo.com/video/"+i)},i=function(t,i){var e=z.createElement("img");return e.className="video-cover",e.src=i,t.appendChild(e),e},k=function(){var t;return(t=e.getElementById("vl-size-test"))||((t=e.createElement("div")).id="vl-size-test",t.style.cssText="position:fixed;top:0;left:0;bottom:0;right:0;visibility:hidden;",e.body.appendChild(t)),{width:t.offsetWidth,height:t.offsetHeight}},r=function(t,h,a,i){var l,p,e,s,o,d,u,n,r,c,y,f,g,v;for(null==i&&(i=30),e=t.getBoundingClientRect(),p={x:(u=k().width)/2,y:(d=k().height)/2},l={x:h/2,y:a/2},n=[],g=s=e.left,r=e.right+h,c=i;0<c?s<=r:r<=s;g=s+=c)n.push([g-h,e.top-a]),n.push([g-h,e.bottom]);for(v=o=e.top,y=e.bottom+a,f=i;0<f?o<=y:y<=o;v=o+=f)n.push([e.left-h,v-a]),n.push([e.right,v-a]);return n.sort(function(t,i){for(var e,s,o=[[t,t={}],[i,i={}]],n=0,r=o.length;n<r;n++)g=(e=o[n])[0][0],v=e[0][1],e[1].diffx=(s=g+l.x)>p.x?s-p.x:p.x-s,e[1].diffy=(s=v+l.y)>p.y?s-p.y:p.y-s,e[1].diff=e[1].diffx+e[1].diffy,(g<0||u<g+h)&&(e[1].diff+=1e4),(v<0||d<v+a)&&(e[1].diff+=1e4);return t.diff-i.diff}),{x:parseInt((g=n[0][0])<0||u<g+h?p.x-l.x:g,10),y:parseInt((v=n[0][1])<0||d<v+a?p.y-l.y:v,10)}},this.videoLightning=B,this.vlData={},this.vlData.instances=[],this.vlData.ytReady=(D=this,function(){return D.vlData.ytAPIReady=!0}),this.vlData.youtube=this.vlData.vimeo=!1,"undefined"!=typeof $&&($.fn.jqueryVideoLightning=function(i){return this.each(function(){var t;$.data(this,"plugin_jqueryVideoLightning")||(t=new m({el:this,opts:i}),vlData.instances.push(t),$.data(this,"plugin_jqueryVideoLightning",t))}),b()})}(document)}.call(this);